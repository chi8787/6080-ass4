{"ast":null,"code":"var _jsxFileName = \"/Users/paul/Documents/2024T1/6080/presto/frontend/src/pages/register.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { Container, Stack, TextField, Button, Typography, Alert, CircularProgress, Paper } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Register(props) {\n  _s();\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    password: '',\n    password2: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    return () => {\n      setLoading(false);\n      setError('');\n    };\n  }, []);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (form.password !== form.password2) {\n      // check if passwords match\n      setError('Passwords do not match');\n      return;\n    }\n    if (!form.email || !form.password || !form.name) {\n      // check if all fields are filled\n      setError('Please fill in all fields');\n      return;\n    }\n    setLoading(true); // trigger UI change\n    try {\n      const response = await axios.post('http://localhost:5005/admin/auth/register', form);\n      props.setTokenfunction(response.data.token);\n      navigate('/dashboard'); // if successful, redirect to dashboard\n    } catch (error) {\n      if (error.response) {\n        setError(error.response.data.error || 'Failed to register');\n      }\n    } finally {\n      setLoading(false); // reset UI state\n    }\n  };\n\n  const handleChange = field => event => {\n    setForm({\n      ...form,\n      [field]: event.target.value\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 2,\n      sx: {\n        p: 3,\n        mt: 8,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        sx: {\n          mb: 2\n        },\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          width: '100%',\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        style: {\n          width: '100%'\n        },\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Name\",\n            type: \"text\",\n            value: form.name,\n            onChange: handleChange('name'),\n            \"data-testid\": \"name-input\",\n            fullWidth: true,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Email Address\",\n            type: \"email\",\n            value: form.email,\n            onChange: handleChange('email'),\n            fullWidth: true,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Password\",\n            type: \"password\",\n            value: form.password,\n            onChange: handleChange('password'),\n            fullWidth: true,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Confirm Password\",\n            type: \"password\",\n            value: form.password2,\n            onChange: handleChange('password2'),\n            fullWidth: true,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            disabled: loading,\n            fullWidth: true,\n            sx: {\n              mt: 1,\n              mb: 2\n            },\n            \"aria-label\": \"create account\",\n            children: loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 26\n            }, this) : 'Create Account'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            onClick: () => navigate('/'),\n            fullWidth: true,\n            \"aria-label\": \"back to login\",\n            children: \"Back to Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"py1IaoyK9zls08uw5JckshKKaG4=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","Container","Stack","TextField","Button","Typography","Alert","CircularProgress","Paper","jsxDEV","_jsxDEV","Register","props","_s","form","setForm","name","email","password","password2","loading","setLoading","error","setError","navigate","handleSubmit","event","preventDefault","response","post","setTokenfunction","data","token","handleChange","field","target","value","maxWidth","children","elevation","sx","p","mt","display","flexDirection","alignItems","variant","component","mb","fileName","_jsxFileName","lineNumber","columnNumber","severity","width","onSubmit","style","spacing","label","type","onChange","fullWidth","required","color","disabled","size","onClick","_c","$RefreshReg$"],"sources":["/Users/paul/Documents/2024T1/6080/presto/frontend/src/pages/register.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { Container, Stack, TextField, Button, Typography, Alert, CircularProgress, Paper } from '@mui/material';\n\nfunction Register (props) {\n  const [form, setForm] = useState({ name: '', email: '', password: '', password2: '' });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    return () => {\n      setLoading(false);\n      setError('');\n    };\n  }, []);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    if (form.password !== form.password2) { // check if passwords match\n      setError('Passwords do not match');\n      return;\n    }\n    if (!form.email || !form.password || !form.name) { // check if all fields are filled\n      setError('Please fill in all fields');\n      return;\n    }\n\n    setLoading(true); // trigger UI change\n    try {\n      const response = await axios.post('http://localhost:5005/admin/auth/register', form);\n      props.setTokenfunction(response.data.token);\n      navigate('/dashboard'); // if successful, redirect to dashboard\n    } catch (error) {\n      if (error.response) {\n        setError(error.response.data.error || 'Failed to register');\n      }\n    } finally {\n      setLoading(false); // reset UI state\n    }\n  };\n\n  const handleChange = (field) => (event) => {\n    setForm({ ...form, [field]: event.target.value });\n  };\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Paper elevation={2} sx={{ p: 3, mt: 8, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n        <Typography variant=\"h4\" component=\"h1\" sx={{ mb: 2 }}>\n          Register\n        </Typography>\n        {error && <Alert severity=\"error\" sx={{ width: '100%', mb: 2 }}>{error}</Alert>}\n        <form onSubmit={handleSubmit} style={{ width: '100%' }}>\n          <Stack spacing={2}>\n            <TextField\n              label=\"Name\"\n              type=\"text\"\n              value={form.name}\n              onChange={handleChange('name')}\n              data-testid=\"name-input\" \n              fullWidth\n              required\n            />\n            <TextField\n              label=\"Email Address\"\n              type=\"email\"\n              value={form.email}\n              onChange={handleChange('email')}\n              fullWidth\n              required\n            />\n            <TextField\n              label=\"Password\"\n              type=\"password\"\n              value={form.password}\n              onChange={handleChange('password')}\n              fullWidth\n              required\n            />\n            <TextField\n              label=\"Confirm Password\"\n              type=\"password\"\n              value={form.password2}\n              onChange={handleChange('password2')}\n              fullWidth\n              required\n            />\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              disabled={loading}\n              fullWidth\n              sx={{ mt: 1, mb: 2 }}\n              aria-label=\"create account\"\n            >\n              {loading ? <CircularProgress size={24} /> : 'Create Account'}\n            </Button>\n            <Button\n              variant=\"outlined\"\n              onClick={() => navigate('/')}\n              fullWidth\n              aria-label=\"back to login\"\n            >\n              Back to Login\n            </Button>\n          </Stack>\n        </form>\n      </Paper>\n    </Container>\n  );\n}\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}